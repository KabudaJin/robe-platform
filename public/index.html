<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¸ƒæ–™æ•°æ®åº“</title>
  <script>
    // è·å–å½“å‰åŸŸåï¼Œé€‚åº”ä¸åŒç¯å¢ƒ
    const API_BASE_URL = window.location.origin;
    
    async function loadFabrics() {
      const res = await fetch(`${API_BASE_URL}/api/fabrics`);
      const data = await res.json();
      const table = document.getElementById('fabric-table');
      table.innerHTML = '<tr><th>åç§°</th><th>æè´¨</th><th>é¢œè‰²</th><th>å…‹é‡</th><th>å›¾ç‰‡</th></tr>';
      data.forEach(f => {
        table.innerHTML += `
          <tr>
            <td>${f.name}</td>
            <td>${f.material}</td>
            <td>${f.color}</td>
            <td>${f.weight}</td>
            <td><img src="${API_BASE_URL}${f.image}" width="80"></td>
          </tr>`;
      });
    }

    async function handleSubmit(event) {
      event.preventDefault();
      const form = document.getElementById('fabric-form');
      const formData = new FormData(form);
      await fetch(`${API_BASE_URL}/api/fabrics`, {
        method: 'POST',
        body: formData
      });
      form.reset();
      loadFabrics();
    }

    window.onload = loadFabrics;
  </script>
</head>
<body>
  <h2>ğŸ“¦ å¸ƒæ–™æ•°æ®åº“ä¸Šä¼ </h2>
  <form id="fabric-form" onsubmit="handleSubmit(event)">
    åç§°: <input name="name" required> <br>
    æè´¨: <input name="material" required> <br>
    é¢œè‰²: <input name="color" required> <br>
    å…‹é‡: <input name="weight" required> <br>
    å›¾ç‰‡: <input type="file" name="image" accept="image/*" required> <br>
    <button type="submit">ä¸Šä¼ </button>
  </form>

  <h3>ğŸ“‹ å½“å‰å¸ƒæ–™åˆ—è¡¨</h3>
  <table border="1" id="fabric-table"></table>
</body>
</html>


